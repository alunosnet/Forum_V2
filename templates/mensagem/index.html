{% extends "layout.html" %}
{% block body %}

    <form method="post" action="/forum">
        Mensagem: <input type="text" name="texto"><br>
        Utilizador:
        <select name="utilizador">
            {% for utilizador in utilizadores %}
                <option value="{{ utilizador['id'] }}">{{ utilizador['nome'] }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Enviar mensagem">
    </form>
    {{ mensagem }}
    <table>
        <tr>
            <th>Mensagem</th>
            <th>Utilizador</th>
            <th>Data</th>
            <th></th>
        </tr>
        {% for registo in registos %}
        <tr>
            <td>{{ registo["texto"] }}</td>
            <td>{{ registo["id_utilizador"] }}</td>
            <td>{{ registo["data_hora_mensagem"] }}</td>
            <td>
                <form method="post" action="/mensagem/apagar">
                    <input type="hidden" name="id" value="{{ registo['id'] }}">
                    <input type="submit" value="Apagar">
                </form>
            </td>
            <td>
                <form method="post" action="/mensagem/responder">
                    <input type="hidden" name="id" value="{{ registo['id'] }}">
                    <input type="submit" value="Responder">
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

{% endblock %}